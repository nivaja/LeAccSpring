<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
xmlns:layout="http://www.ultraq.net.nz.thymeleaf/layout"
layout:decorate="~{fragment/main_layout}">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Responsive Admin Dashboard Template">
    <meta name="keywords" content="admin,dashboard">
    <meta name="author" content="stacks">
    <!-- The above 6 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <link rel="stylesheet" href="http://cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css">




    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.0/js/mdb.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.bundle.js"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css">

    <!-- Material Design Bootstrap -->
    <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.8.0/css/mdb.min.css" rel="stylesheet">-->

    <!-- Title -->
    <title>Space - Responsive Admin Dashboard Template</title>


</head>

<body>
<div layout:fragment="content">
    <div class="page-title">
        <div sec:authentication="principal.authorities"></div>
        <h3 class="breadcrumb-header">Dashboard</h3>
    </div>
    <div id="main-wrapper">
        <!-- SHARD BLOCK -->

        <div class="row">

            <div class="col-lg col-md-6 col-sm-6 mb-4">
                <div class="stats-small stats-small--1 card card-small">
                    <div class="card-body p-0 d-flex">
                        <div class="d-flex flex-column m-auto">
                            <div class="stats-small__data text-center">
                                <span class="stats-small__label text-uppercase">Sales</span>
                                <h6 class="stats-small__value count my-3" th:text="${dashboard.sales()}"></h6>
                            </div>

                        </div>
                        <canvas height="120" class="blog-overview-stats-small-1"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-lg col-md-6 col-sm-6 mb-4">
                <div class="stats-small stats-small--1 card card-small">
                    <div class="card-body p-0 d-flex">
                        <div class="d-flex flex-column m-auto">
                            <div class="stats-small__data text-center">
                                <span class="stats-small__label text-uppercase">Net Profit</span>
                                <h6 class="stats-small__value count my-3" th:text="${dashboard.netProfit()}"></h6>
                            </div>

                        </div>
                        <canvas height="120" class="blog-overview-stats-small-2"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-lg col-md-4 col-sm-6 mb-4">
                <div class="stats-small stats-small--1 card card-small">
                    <div class="card-body p-0 d-flex">
                        <div class="d-flex flex-column m-auto">
                            <div class="stats-small__data text-center">
                                <span class="stats-small__label text-uppercase">Income</span>
                                <h6 class="stats-small__value count my-3" th:text="${dashboard.income()}"></h6>
                            </div>

                        </div>
                        <canvas height="120" class="blog-overview-stats-small-3"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-lg col-md-4 col-sm-6 mb-4">
                <div class="stats-small stats-small--1 card card-small">
                    <div class="card-body p-0 d-flex">
                        <div class="d-flex flex-column m-auto">
                            <div class="stats-small__data text-center">
                                <span class="stats-small__label text-uppercase">Expenses</span>
                                <h6 class="stats-small__value count my-3" th:text="${dashboard.expenses()}"></h6>
                            </div>

                        </div>
                        <canvas height="120" class="blog-overview-stats-small-4"></canvas>
                    </div>
                </div>
            </div>
            <div class="col-lg col-md-4 col-sm-12 mb-4">
                <div class="stats-small stats-small--1 card card-small">
                    <div class="card-body p-0 d-flex">
                        <div class="d-flex flex-column m-auto">
                            <div class="stats-small__data text-center">
                                <span class="stats-small__label text-uppercase">Customer</span>
                                <h6 class="stats-small__value count my-3" th:text="${dashboard.customer()}"></h6>
                            </div>

                        </div>
                        <canvas height="120" class="blog-overview-stats-small-5"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- SHARD BLOCK END -->
        <div class="row">
            <!-- Production vs Sales Stats -->
            <div class="col-lg-8 col-md-12 col-sm-12 mb-4">
                <div class="card card-small">
                    <div class="card-header border-bottom">
                        <h6 class="m-0">Monthly Sales</h6>
                    </div>
                    <div class="card-body pt-0">

                        <canvas height="150" style="max-width: 100% !important;" class="blog-overview-users"></canvas>
                    </div>
                </div>
            </div>
            <!-- Production vs sales Stats -->

            <!-- Users By Expense breakdown -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                <div class="card card-small h-100">
                    <div class="card-header border-bottom">
                        <h6 class="m-0">Expense Break Down</h6>
                    </div>
                    <div class="card-body d-flex py-0">
                        <!-- <canvas id="expense_breakdown"></canvas> -->
                        <!--<canvas height="220" class="blog-users-by-device m-auto"></canvas>-->
                        <canvas height="280" id="expensesChart" class="m-auto"></canvas>
                        <script>
                            //doughnut
                            $.getJSON("http://localhost:8000/api/graph/expenses", function(data){
console.log(data);
                                console.log(data.lable);
                                console.log(data.amount);

                            var ctxD = document.getElementById("expensesChart").getContext('2d');
                            var myLineChart = new Chart(ctxD, {
                                type: 'doughnut',
                                data: {
                                    labels: data.lable,
                                    datasets: [{
                                        data: data.amount,
                                        backgroundColor: ["#bbdefb", "#42a5f5", "#1e88e5", "#949FB1", "#1565c0"],
                                        hoverBackgroundColor: ["#90caf9", "#2196f3", "#1976d2", "#A8B3C5", "#0d47a1"]
                                    }]
                                },
                                options: {
                                    responsive: true
                                }
                            });
                            });
                        </script>
                    </div>

                </div>
            </div>
            <!-- End Users By Expense break down -->
        </div>
        <!-- Row -->

        <div class="row">

            <!-- Users Stats -->
            <div class="col-12 mb-4">
                <div class="card">
                    <div class="card-header border-bottom">
                        <h6 class="m-0">Sales By Customer</h6>
                    </div>
                    <div class="card-body pt-0">

                        <canvas id="salesByCustomer" height="380" style="margin-top: 3%; width: 100%;"></canvas>
                        <script th:src="@{/custom/js/graphs/sales_by_customer.js}"></script>                        <!-- <canvas height="130" style="max-width: 100% !important;" class="blog-overview-users"></canvas> -->
                    </div>
                </div>
            </div>
            <!-- End Sales By Customer Stats -->

        </div>
        <!-- Row -->
        <!--Stock Summary  -->
        <div class="row">
            <div class="col-lg-8 col-md-12 col-sm-12 mb-4">

                <div class="card">
                    <div class="card-header border-bottom">
                        <h6 class="m-0">Stock Summary</h6>
                    </div>
                    <div class="card-body pt-0">
                        <canvas id="stockSummary"></canvas>
                        <script th:src="@{/custom/js/graphs/stock_summary.js}"></script>
                    </div>
                </div>
            </div>

            <!-- Users By Income breakdown -->
            <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
                <div class="card card-small h-100">
                    <div class="card-header border-bottom">
                        <h6 class="m-0">Income Break Down</h6>

                    </div>
                    <div class="card-body d-flex py-0">


                        <!-- <canvas id="expense_breakdown"></canvas> -->
                        <canvas height="280" id="incomeChart" class="m-auto"></canvas>
                        <script>
                            //doughnut
                            $.getJSON("http://localhost:8000/api/graph/income", function(data){
                                console.log(data);
                                console.log(data.lable);
                                console.log(data.amount);

                                var ctxD = document.getElementById("incomeChart").getContext('2d');
                                var income = new Chart(ctxD, {
                                    type: 'doughnut',
                                    data: {
                                        labels: data.lable,
                                        datasets: [{
                                            data: data.amount,
                                            backgroundColor: ["#bbdefb", "#42a5f5", "#1e88e5", "#949FB1", "#1565c0"],
                                            hoverBackgroundColor: ["#90caf9", "#2196f3", "#1976d2", "#A8B3C5", "#0d47a1"]
                                        }]
                                    },
                                    options: {
                                        responsive: true
                                    }
                                });
                            });
                        </script>
                    </div>

                </div>
            </div>
            <!-- End Income break down -->
        </div>

        <div class="row">
            <!-- NET INCOME -->
            <div class="col-lg-12 col-md-12 col-sm-12 mb-4">
                <div class="card card-small">
                    <div class="card-header border-bottom">
                        <h6 class="m-0">Net Income Graph</h6>
                    </div>
                    <div class="card-body pt-0">
                        <div class="row border-bottom py-2 bg-light" style="padding:2%; ">

                            <!--<canvas height="130" style="max-width: 100% !important;" class="blog-overview-users"></canvas>-->
                            <canvas height="100" id="netIncome" ></canvas>
                            <script th:src="@{/custom/js/graphs/net_income.js}"></script>

                        </div>
                    </div>
                </div>


                <!-- End NET INCOME -->
            </div>
            <!-- Row -->

            <!-- Row -->
        </div>


        <!-- Main Wrapper -->
        <div class="page-footer">
            <p>Made with by Lemon Technology</p>
        </div>

</div>


</div>

</body>

</html>